/* 基本的なリセットと変数の定義 */
:root {
  --loading-primary-color: #90daee;
  --loading-text-color: #000000;
  --loading-border-color: rgba(255, 255, 255, 0.3);
  --loading-spinner-color: #000000;
  --loading-fade-duration: 3s;
  --loading-spin-duration: 1s;
  --loading-fade-in-duration: 0.5s;
}

/* ローディングコンテナの基本スタイル */
.loading-fallback {
  position: fixed;
  inset: 0; /* top, right, bottom, leftをすべて0に設定（モダンな省略記法） */
  display: flex;
  justify-content: center;
  align-items: flex-end;
  width: 100%;
  height: 100%;
  z-index: 1000;

  /* 背景スタイル */
  background-color: var(--loading-primary-color);
  background-image: url('../../utils/images/row1.png');
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;

  /* トランジション効果 */
  opacity: 1;
  will-change: opacity; /* パフォーマンス最適化 */
  transition: opacity 300ms ease-in;
}

/* フェードアウト効果 */
.loading-fallback.fading {
  animation: fadeOut var(--loading-fade-duration) ease-in forwards;
}

/* コンテンツコンテナ */
.loading-content {
  text-align: center;
  padding: 1.25rem; /* remで一貫性を保つ */
  color: var(--loading-text-color);
  font-size: 1.5rem;
  margin-bottom: 6.25rem; /* 100px相当 - 下部からの距離を確保 */
  animation: fadeIn var(--loading-fade-in-duration) ease-in;
}

/* スピナー */
.loading-spinner {
  width: 3.125rem; /* 50px相当 */
  height: 3.125rem; /* 50px相当 */
  margin: 0 auto 1.25rem; /* 上下0、左右auto、下部マージン1.25rem (20px相当) */
  border: 0.3125rem solid var(--loading-border-color); /* 5px相当 */
  border-top-color: var(--loading-spinner-color);
  border-radius: 50%;
  animation: spin var(--loading-spin-duration) linear infinite;
}

/* アニメーション定義 */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* アクセシビリティの向上 */
@media (prefers-reduced-motion: reduce) {
  .loading-fallback,
  .loading-content,
  .loading-spinner {
    transition: none;
    animation: none;
  }

  .loading-fallback.fading {
    opacity: 0;
  }
}

/* ダークモードサポート */
@media (prefers-color-scheme: dark) {
  :root {
    --loading-primary-color: #2a4d59;
    --loading-text-color: #ffffff;
    --loading-border-color: rgba(0, 0, 0, 0.3);
    --loading-spinner-color: #ffffff;
  }
}

/* 高コントラストモードのサポート */
@media (forced-colors: active) {
  .loading-spinner {
    border-color: CanvasText;
    border-top-color: Highlight;
  }
}
